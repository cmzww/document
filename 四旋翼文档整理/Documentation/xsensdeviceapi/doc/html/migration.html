<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Upgrading from CMT or XDA 4.0</title>
<link href="xsens.css" rel="stylesheet" type="text/css"/>
</head><body>
<img class="logo" src="xsenslogo.jpg" alt="Xsens Logo" />
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Upgrading from CMT or XDA 4.0 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="mig_cmt_41_intro"></a>
Migration from Xsens CMT</h1>
<h2><a class="anchor" id="mig_38_41_intro"></a>
Migration from Xsens CMT 3.8</h2>
<p>The migration is similar to the CMT 3.3 migration.</p>
<h2><a class="anchor" id="mig_33_41_intro"></a>
Migration from Xsens CMT 3.3</h2>
<p>For a quick overview of MT SDK 4, please refer to the <a class="el" href="overview.html">Overview of the Xsens Device API</a> Overview page. This document assumes that you are using a C++ environment for your development, but it applies equally to other environments. For example, the C interface supplies the same functionality as the C++ interface but uses the class name as a function prefix (ie XsControl_openPort instead of <a class="el" href="struct_xs_control.html#a0dcd5f3427b7509b07baf64650e56dbd" title="Open a communication channel on serial port with the given portname.">XsControl::openPort</a>)</p>
<h2><a class="anchor" id="mig_33_41_reasons"></a>
Reasons for migrating</h2>
<p>All SDK migration takes time and has risks, so we understand that you'd rather not do it at all. Here are some reasons why it is beneficial to migrate to the latest XDA. </p>
<ol>
<li>
To make use full use of the MT Mk4, the 4th generation of Xsens devices (MTi-10,20,30,100,200,300 and MTi-G-700), you will need XDA. <ul>
<li>
When using CMT, you will need to connect to these devices with a USB to serial converter (contact sales), since CMT does not support direct USB communication. </li>
<li>
To configure your Mk4 device to do more than output orientations in legacy mode, you will need XDA. </li>
</ul>
</li>
<li>
The communication and processing pipeline of XDA is much more robust. </li>
<li>
The object-based interface is much faster than the CMT interface (when used properly). </li>
<li>
The underlying C-interface makes integration issues with other languages than C and C++ easy. </li>
</ol>
<h2><a class="anchor" id="mig_33_41_diffs"></a>
Comparison</h2>
<p>These are the most notable differences between these SDK versions. </p>
<table class="doxtable">
<tr>
<td><b>MT SDK / CMT</b></td><td><b>MT SDK 4</b> </td></tr>
<tr>
<td>Xsens CMT (Communication for Motion Trackers) library</td><td>XDA (Xsens Device API) library </td></tr>
<tr>
<td>Mixed C/C++ interface</td><td>Pure C interface with C++ wrapper interface </td></tr>
<tr>
<td>Preallocation of buffers is often required</td><td>XDA-managed safe interface objects are passed between the library and the application </td></tr>
<tr>
<td>All library functions are plain functions using an instance number and device ID for device identification</td><td>Library functions and structures are available as C++ classes without the need for explicit identification per function </td></tr>
<tr>
<td>CMT 3.3 Only supports MT9-C and Xbus Master devices<br/>
 CMT 3.8 Only supports MTw and Awinda Station devices</td><td>Supports 4th generation Xsens devices (MTi-10,20,30,100,200,300 and MTi-G-700). <br/>
Supports MTw and Awinda Station devices. </td></tr>
<tr>
<td>Data output in fixed-rate all-in-one format</td><td>Data output rates configurable per type of output. Also many more output types are available. </td></tr>
<tr>
<td>All functions are prefixed with cmt</td><td>All global functions and objects are prefixed with Xs. </td></tr>
<tr>
<td>All structs are prefixed with Cmt</td><td>All global functions and objects are prefixed with Xs. </td></tr>
</table>
<h2><a class="anchor" id="mig_33_41_compat"></a>
Compatibility</h2>
<p>XDA 4 officially supports all types of MT Mk4 and all their features. There is also support for all older Xsens devices. MT Mk4 devices were designed to be drop-in replaceable with older MT9-C devices. When MT Mk4 devices are configured to output orientation data in legacy output mode, CMT will recognize the device. In this case only basic functionality is available, such as the reading of orientation data. XDA can be run side-by-side with CMT, but the libraries don’t interact. A full conversion to XDA is recommended to make use of all features of the MT Mk4 devices.</p>
<h2><a class="anchor" id="mig_33_41_workflow"></a>
Workflow</h2>
<p>Device management and global control functions are grouped in the <a class="el" href="struct_xs_control.html" title="High level Motion Tracker (MT) management class.">XsControl</a> object. To access functionality for a specific device the <a class="el" href="struct_xs_device.html" title="A pointer to an XsDevice object.">XsDevice</a> object is available. For the rest the basic workflow of dealing with devices remains pretty much unchanged. Typical steps are: </p>
<ol>
<li>
Enter a serial key with <a class="el" href="struct_xs_control.html#ab6673814556e4a0b2120962324104a87" title="Set the serial key for XDA.">XsControl::setSerialKey</a> </li>
<li>
Scan for Xsens devices with <a class="el" href="class_xs_scanner.html#a42f1eac216fdfa16fd001264d7763202" title="Scan all ports for Xsens devices.">XsScanner::scanPorts</a> </li>
<li>
Open port with <a class="el" href="struct_xs_control.html#a0dcd5f3427b7509b07baf64650e56dbd" title="Open a communication channel on serial port with the given portname.">XsControl::openPort</a> and get device object with <a class="el" href="struct_xs_control.html#a1f9a3e46365b0381eb5bdecec5c66014" title="Returns the XsDevice interface object associated with the supplied deviceId.">XsControl::device</a> </li>
<li>
Configure device with <a class="el" href="struct_xs_device.html" title="A pointer to an XsDevice object.">XsDevice</a>:: interface functions </li>
<li>
Start measuring </li>
</ol>
<h2><a class="anchor" id="mig_33_41_coding"></a>
Coding steps to take</h2>
<ol>
<li>
Replace all Cmt objects in the code by their Xs counterparts. </li>
<li>
Use an inherited <a class="el" href="class_xs_callback.html" title="Structure that contains callback functions for the Xsens Device API.">XsCallback</a> object instead of inheriting directly from Cmt4 </li>
<li>
For quick migration, it is possible to replace all calls to Cmt4::<a href="deviceId, ...">function</a> with calls to XsControl::device(deviceId)-&gt;<a href="...">function</a>. This provides a simple and safe transition, but doesn't give any significant improvements over CMT. </li>
<li>
For full migration, replace device ID storage by XsDevice* storage and use <a class="el" href="struct_xs_device.html" title="A pointer to an XsDevice object.">XsDevice</a> class functions directly. </li>
</ol>
<h1><a class="anchor" id="mig_40_41_intro"></a>
Upgrading from XDA 4.0 to XDA 4.1 or higher</h1>
<p>We always try to avoid making breaking changes in our XDA interface. However, sometimes it's necessary to make some changes to preserve quality. This section gives a quick overview of potentially breaking changes and some new features in the latest XDA. </p>
<h2><a class="anchor" id="mig_40_41_changes"></a>
Breaking changes</h2>
<ul>
<li>
The "hardware" scenario functions have been renamed to "onboard" scenario functions. </li>
<li>
The onMeasurementStarted, onMeasurementStopping, onMeasurementStoppped, onWaitingForRecordingStart, onRecordingStarted and onRecordingStopped callbacks have been replaced by <a class="el" href="group___callbacks.html#ga24d179eecbcde2ca2f3206cb6f7c05f0" title="Called when a device&#39;s state has changed (ie config mode, measurement mode, recording mode) ...">XsCallback::onDeviceStateChanged</a> </li>
<li>
<a class="el" href="group__cinterface.html#ga8caac814a4ee656f1774ad23ccc5f16e">XsIoHandle</a> is now in file xsfilepos.h together with <a class="el" href="group__cinterface.html#ga74e67937a1394ad0c13d4d8f6b6f1d67">XsFileHandle</a> </li>
<li>
The internal storeAlignmentMatrix function has been removed from the <a class="el" href="struct_xs_device.html" title="A pointer to an XsDevice object.">XsDevice</a> interface. </li>
<li>
The <a class="el" href="group__enums.html#ga4a1c2443ecb8b093eda10fff7c160f95">XsQueueMode</a> is now a mutually exclusive choice of XQM_CallbackOnly, XQM_Fifo or XQM_Last. </li>
<li>
The coordinateSystem function of the <a class="el" href="struct_xs_data_packet.html" title="Contains an interpreted data message. The class provides easy access to the contained data through it...">XsDataPacket</a> interface is replaced by the coordinateSystemOrientation function. </li>
</ul>
<h2><a class="anchor" id="mig_40_41_new"></a>
New features</h2>
<ul>
<li>
Support for the MTi-G-700 device. </li>
<li>
The <a class="el" href="struct_xs_data_bundler.html" title="Combines data from multiple sources into one stream.">XsDataBundler</a> class is now available for receiving data from several devices at the same time. Please note that devices that are not synchronized through a hardware connection will have time drift with respect to each other. MTws connected to the same Awinda Station are synchronized through wireless hardware. </li>
<li>
The <a class="el" href="group___callbacks.html#gacad6280b5dc0c8e458b22e26a50bad40" title="Called when XDA has detected a change in the connectivity state of a device. ">XsCallback::onConnectivityChanged</a>, <a class="el" href="group___callbacks.html#ga224586f8f7e0e9f0b57091b7d9a24bc5" title="Called when an information request has resulted in a response. ">XsCallback::onInfoResponse</a> and <a class="el" href="group___callbacks.html#ga4a31e495dde9ee053c070fbf06cbe89f" title="Called when an error has occurred while handling incoming data. ">XsCallback::onError</a> callbacks have been added. </li>
<li>
It is now possible to configure synchronization features and <a class="el" href="struct_xs_device.html#af99fb37cbc1479c774c891c01dd43fad" title="Get all supported synchronization settings available on the device.">XsDevice::supportedSyncSettings</a> has been added to provide available synchronization options per device. Please be sure to use at least firmware version 1.1 for MT Mk4 devices or synchronization will not be available for your device. </li>
<li>
It is now possible to set and request <a class="el" href="group__enums.html#ga4a1c2443ecb8b093eda10fff7c160f95">XsQueueMode</a> globally and per <a class="el" href="struct_xs_device.html" title="A pointer to an XsDevice object.">XsDevice</a>. </li>
<li>
For basic Awinda support, several functions and communication structures have been added to <a class="el" href="struct_xs_device.html" title="A pointer to an XsDevice object.">XsDevice</a>. </li>
</ul>
</div></div><!-- contents -->

<div class="tabs">&nbsp;</div>
<hr size="1" />
<address style="text-align: right;">
<small>Generated on Thu Jan 16 2014 for Xsens by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.2</small>
</address>
</body>
</html>
